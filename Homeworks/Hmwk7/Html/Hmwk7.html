<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=
    , initial-scale=1.0">
    <title>Slider</title>
</head>

<script src="../Data/Top10_2012.js"></script>
<script src="../Data/Top10_2019.js"></script>
<script src="../Data/Top10_2020.js"></script>
<script src="../Data/Top10_2021.js"></script>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
crossorigin=""/>


<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>

<body>

    <h1> Top 10 Counties Contributing Migrants <br> to the Raleigh/Durham Metro Each Year</h1>
  <h3>Excludes Counties within NC</h3>

  <h6>***Data intentionally skips from 2012 to 2019 to better visually demonstrate change over time*** <br>I'm still figuring out the best way to format the data </br></h6>

    <h3 id="theYears">2012</h3>

<input id="myRange" type="range" name = "MigYears" value="0" min="0" max="3" oninput="moveSlider(this.value)">

    <div id="map"></div>

<style>#map { height: 400px; width: 400px; }</style>

    <script>
    var map = L.map('map').setView([ 30.5, -98.8], 3);

    var OSM = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);



    var myStyle = {
    "color": "#8B0000",
    "weight": 0.8,
    "opacity": .9
};

    var myData = [Tops2012, Tops2019, Tops2020, Tops2021] // array ordering the data. You need to be very careful with this method as you are bringing in all the data at once. 
     var order = ['2012','2019','2020','2021'] // an array with the date of each data source
     var MigYears = L.geoJSON(myData[0], {style: myStyle}).addTo(map); // open the first element of the myData array




     function moveSlider(value){  // function called by the slider, with the value parameter: the value goes from 0 to 4
        var Layer1 = myData[value] // get the data based on the slider value
        map.removeLayer(MigYears);// leaflet method to remove a layer //drought.remove()  
        MigYears = L.geoJSON(Layer1, {style: myStyle});
        map.addLayer(MigYears); // add the new layer
        document.getElementById('theYears').innerHTML = order[value] // change the text above the slider
    }
   // moveSlider(0)

   window.onload = function() {
	
    slider.value = 1;
        
    };

    </script>

</body>
</html>